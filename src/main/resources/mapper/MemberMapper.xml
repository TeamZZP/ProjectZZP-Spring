<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MemberMapper">

	<!-- 로그인 ID 확인 -->
	<select id="loginIDCheck" parameterType="hashmap" resultType="MemberDTO">
		select * from member where userid = #{userid}
	</select>
	
	<!-- 로그인 -->
	<select id="login" parameterType="hashmap" resultType="MemberDTO">
		select * from member where userid = #{userid} and passwd = #{passwd}
	</select>
	
	<!-- 회원가입 -->
	<insert id="joinMember" parameterType="hashMap">
		insert all
			<!-- member -->
			into member
			values (#{userid}, #{passwd}, #{username}, #{email1}, #{email2}, #{phone}, sysdate, 0)
			<!-- address -->
			into address
			values (address_address_id_seq.nextval, #{userid}, #{username}, #{username}, #{phone}, 
					#{post_num}, #{addr1}, #{addr2}, 1)
			<!-- profile -->
			into profile 
			values (#{userid}, 'user.png', ' ')
			select * from dual
	</insert>
	
	<!-- 회원가입 아이디 중복 확인 -->
	<select id="checkID" parameterType="String" resultType="MemberDTO">
		select * from member where userid = #{userid}
	</select>
	
</mapper>